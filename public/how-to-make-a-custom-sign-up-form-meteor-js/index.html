<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <title>How to Make Custom Sign Up and Login Forms (Meteor.js)</title>
  
  <meta name="author" content="David Miranda">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700|Roboto:400,300,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://thinklens.com/css/main.css">
</head>
<body>
<div class="site-wide-container">
  <a href="/" class="return-to-home-link"><svg class="home-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42.2 39"><style>.st0{fill:#3543c9}</style><path class="st0" d="M42.2 20.9h-5.4V39h-11V26.7h-9.4V39H5V20.9H0L20.9 0z"/></svg> Return to home page</a>
</div>
<div class="article">
  <div class="article-header-area site-wide-container">
    <div class="title-label">Thinklens article</div>
    <h1 class="article-title">How to Make Custom Sign Up and Login Forms (Meteor.js)</h1>
  </div>
  <div class="black-strip">
    <div class="site-wide-container">
      <div class="article-date">May 29, 2015</div>
    </div>
  </div>
  <div class="article-content site-wide-container">
    

<p>If you&rsquo;re making a basic website, the <code>accounts-ui</code> package is a great option to get started with (<a href="https://atmospherejs.com/meteor/accounts-ui">https://atmospherejs.com/meteor/accounts-ui</a>).</p>

<p>However, if you want to add some custom styles to your sign up and login forms, follow along here.</p>

<h2 id="1-install-some-basic-packages:c652e3a06a3d24e9af88a5542cc78949">1. Install some basic packages</h2>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>meteor add accounts-password
meteor add juliancwirko:s-alert
</pre></div>


<p>The <code>accounts-password</code> package depends on the <code>accounts-base</code> package, so that will also be installed.</p>

<p>The <code>juliancwirko:s-alert</code> package will show alerts in the corner of the screen. We&rsquo;ll use this to let a user know they entered an email address or password that&rsquo;s invalid.</p>

<h2 id="2-configure-the-alerts:c652e3a06a3d24e9af88a5542cc78949">2. Configure the alerts</h2>

<p>I put the following code in the main <code>lib</code> folder (in a file called <code>startup.js</code>) to configure the style of the popup alerts.</p>

<p>Putting it in the <code>lib</code> folder ensures it will be loaded before other files, although that&rsquo;s not strictly necessary here.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">Meteor</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">startup</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">Meteor</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">isClient</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">config</span><span style="color: #f8f8f2">({</span>
      <span style="color: #a6e22e">effect</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;flip&#39;</span><span style="color: #f8f8f2">,</span>
      <span style="color: #a6e22e">position</span><span style="color: #f92672">:</span> <span style="color: #e6db74">&#39;bottom-right&#39;</span><span style="color: #f8f8f2">,</span>
      <span style="color: #a6e22e">timeout</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">5000</span><span style="color: #f8f8f2">,</span>
      <span style="color: #a6e22e">html</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">,</span>
      <span style="color: #a6e22e">onRouteClose</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">,</span>
      <span style="color: #a6e22e">stack</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">true</span>
    <span style="color: #f8f8f2">});</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>


<p>If you want to also use the flip animation I&rsquo;m using here, you have to install a separate package for that:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>meteor add juliancwirko:s-alert-flip
</pre></div>


<p>You can see all the available options and effects for this package here: <a href="http://s-alert.meteor.com/">http://s-alert.meteor.com/</a></p>

<h2 id="3-make-some-helper-functions-for-validating-your-forms:c652e3a06a3d24e9af88a5542cc78949">3. Make some helper functions for validating your forms</h2>

<p>We&rsquo;re going to want to make sure that each user enters a valid email address and password, so we&rsquo;re just going to write those functions ahead of time.</p>

<p>They&rsquo;ll be included in the <code>submit</code> event binding for both the Login form and the Sign up form.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">checkEmailIsValid</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">aString</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #a6e22e">aString</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">aString</span> <span style="color: #f92672">||</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">return</span> <span style="color: #a6e22e">aString</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">length</span> <span style="color: #f92672">&gt;</span> <span style="color: #ae81ff">1</span> <span style="color: #f92672">&amp;&amp;</span> <span style="color: #a6e22e">aString</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">indexOf</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;@&#39;</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">&gt;</span> <span style="color: #f92672">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">checkPasswordIsValid</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">aString</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #a6e22e">aString</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">aString</span> <span style="color: #f92672">||</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">return</span> <span style="color: #a6e22e">aString</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">length</span> <span style="color: #f92672">&gt;</span> <span style="color: #ae81ff">7</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>


<p>Don&rsquo;t use the <code>var</code> keyword here unless you want these functions to be scoped to the file they&rsquo;re in. Meteor allows you to omit the <code>var</code> keyword to make a variable global across all files.</p>

<p>I put these function in a <code>helpers.js</code> file in my main <code>lib</code> folder. This way we can use them anywhere on the server or the client.</p>

<h2 id="4-build-the-html-for-the-sign-up-form:c652e3a06a3d24e9af88a5542cc78949">4. Build the html for the Sign up form</h2>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">template</span> <span style="color: #a6e22e">name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;SignUp&quot;</span><span style="color: #f8f8f2">&gt;</span>
  <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">form</span> <span style="color: #a6e22e">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;sign-up-form&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>  
      <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">input</span> <span style="color: #a6e22e">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;email-address-input&quot;</span> <span style="color: #a6e22e">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;text&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
      <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">input</span> <span style="color: #a6e22e">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;password-input&quot;</span> <span style="color: #a6e22e">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;password&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
      <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">button</span> <span style="color: #a6e22e">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;submit&quot;</span><span style="color: #f8f8f2">&gt;</span>Sign up<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">button</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
  <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">form</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">template</span><span style="color: #f8f8f2">&gt;</span>
</pre></div>
</p>

<p>You&rsquo;ll probably want to add some more style to this, or at least some <code>label</code> elements and <code>placeholder</code> values for the email and password fields.</p>

<h2 id="5-build-the-html-for-the-login-form:c652e3a06a3d24e9af88a5542cc78949">5. Build the html for the Login form</h2>

<p>The login form is pretty much identical.</p>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">template</span> <span style="color: #a6e22e">name</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;Login&quot;</span><span style="color: #f8f8f2">&gt;</span>
  <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">form</span> <span style="color: #a6e22e">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;login-form&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>  
      <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">input</span> <span style="color: #a6e22e">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;email-address-input&quot;</span> <span style="color: #a6e22e">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;text&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
      <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">input</span> <span style="color: #a6e22e">class</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;password-input&quot;</span> <span style="color: #a6e22e">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;password&quot;</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
      <span style="color: #f8f8f2">&lt;</span><span style="color: #f92672">button</span> <span style="color: #a6e22e">type</span><span style="color: #f92672">=</span><span style="color: #e6db74">&quot;submit&quot;</span><span style="color: #f8f8f2">&gt;</span>Login<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">button</span><span style="color: #f8f8f2">&gt;</span>
    <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">div</span><span style="color: #f8f8f2">&gt;</span>
  <span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">form</span><span style="color: #f8f8f2">&gt;</span>
<span style="color: #f8f8f2">&lt;/</span><span style="color: #f92672">template</span><span style="color: #f8f8f2">&gt;</span>
</pre></div>
</p>

<h2 id="6-set-up-the-event-handlers-for-the-sign-up-form:c652e3a06a3d24e9af88a5542cc78949">6. Set up the event handlers for the Sign up form</h2>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">Template</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">SignUp</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">events</span><span style="color: #f8f8f2">({</span>
  <span style="color: #e6db74">&#39;submit .sign-up-form&#39;</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">template</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">event</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">preventDefault</span><span style="color: #f8f8f2">();</span>

    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">$form</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">currentTarget</span><span style="color: #f8f8f2">);</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">$emailInput</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$form</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">find</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;.email-address-input&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">eq</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">);</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">$passwordInput</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$form</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">find</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;.password-input&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">eq</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">);</span>

    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">emailAddress</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$emailInput</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">val</span><span style="color: #f8f8f2">()</span> <span style="color: #f92672">||</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">password</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$passwordInput</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">val</span><span style="color: #f8f8f2">()</span> <span style="color: #f92672">||</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">;</span>

    <span style="color: #75715e">//trim</span>
    <span style="color: #a6e22e">emailAddress</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">emailAddress</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">replace</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">/^\s*|\s*$/g</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">);</span>
    <span style="color: #a6e22e">password</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">password</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">replace</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">/^\s*|\s*$/g</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">);</span>

    <span style="color: #75715e">//validate</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">isValidEmail</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">checkEmailIsValid</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">emailAddress</span><span style="color: #f8f8f2">);</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">isValidPassword</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">checkPasswordIsValid</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">password</span><span style="color: #f8f8f2">);</span>

    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #a6e22e">isValidEmail</span> <span style="color: #f92672">||</span> <span style="color: #f92672">!</span><span style="color: #a6e22e">isValidPassword</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #a6e22e">isValidEmail</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Invalid email address&#39;</span><span style="color: #f8f8f2">);</span>
      <span style="color: #f8f8f2">}</span>
      <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #a6e22e">isValidPassword</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Your password must be at least 8 characters long&#39;</span><span style="color: #f8f8f2">);</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #a6e22e">Accounts</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">createUser</span><span style="color: #f8f8f2">({</span>
        <span style="color: #a6e22e">email</span><span style="color: #f92672">:</span> <span style="color: #a6e22e">emailAddress</span><span style="color: #f8f8f2">,</span>
        <span style="color: #a6e22e">password</span><span style="color: #f92672">:</span> <span style="color: #a6e22e">password</span>
      <span style="color: #f8f8f2">},</span> <span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
          <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Account creation failed for unknown reasons :(&#39;</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">{</span>
          <span style="color: #a6e22e">Router</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">go</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;loggedInHome&#39;</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">}</span>
      <span style="color: #f8f8f2">});</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</p>

<ol>
<li>We grab the form element and wrap it in jQuery and use it to find the inputs we&rsquo;re interested in.</li>
<li>We get the values for the email and password inputs and trim these values of white space (just in case a user enters in their email address followed by a few spaces or something).</li>
<li>We check to see if the email and password values are valid using the functions we made in the 3rd step and show an alert to the user if they&rsquo;re invalid.</li>
<li>If they&rsquo;re valid, we create a new account with the <code>Accounts.createUser</code> function. If that returns an error, we surface an error for the user. If it&rsquo;s successful, we redirect them to a new page</li>
</ol>

<h3 id="some-notes:c652e3a06a3d24e9af88a5542cc78949">Some notes</h3>

<p>We&rsquo;re using the <code>sAlert</code> function from the alert package we installed earlier to show alerts.</p>

<p>We&rsquo;re also redirecting the user to a new route after they sign up, using <a href="https://github.com/iron-meteor/iron-router">Iron Router</a>. This is a route and template you have to set up separately. I recommend using the <code>iron-meteor</code> scaffolding tool (<a href="https://github.com/iron-meteor/iron-cli">https://github.com/iron-meteor/iron-cli</a>).</p>

<h2 id="6-set-up-the-event-handlers-for-the-login-form:c652e3a06a3d24e9af88a5542cc78949">6. Set up the event handlers for the Login form</h2>

<p><div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">Template</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">Login</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">events</span><span style="color: #f8f8f2">({</span>
  <span style="color: #e6db74">&#39;submit .login-form&#39;</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">template</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #a6e22e">event</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">preventDefault</span><span style="color: #f8f8f2">();</span>

    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">$form</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">event</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">currentTarget</span><span style="color: #f8f8f2">);</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">$emailInput</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$form</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">find</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;.email-address-input&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">eq</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">);</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">$passwordInput</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$form</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">find</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;.password-input&#39;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">eq</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">);</span>

    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">emailAddress</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$emailInput</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">val</span><span style="color: #f8f8f2">()</span> <span style="color: #f92672">||</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">password</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">$passwordInput</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">val</span><span style="color: #f8f8f2">()</span> <span style="color: #f92672">||</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">;</span>

    <span style="color: #75715e">//trim</span>
    <span style="color: #a6e22e">emailAddress</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">emailAddress</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">replace</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">/^\s*|\s*$/g</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">);</span>
    <span style="color: #a6e22e">password</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">password</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">replace</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">/^\s*|\s*$/g</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;&#39;</span><span style="color: #f8f8f2">);</span>

    <span style="color: #75715e">//validate</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">isValidEmail</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">checkEmailIsValid</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">emailAddress</span><span style="color: #f8f8f2">);</span>
    <span style="color: #66d9ef">var</span> <span style="color: #a6e22e">isValidPassword</span> <span style="color: #f92672">=</span> <span style="color: #a6e22e">checkPasswordIsValid</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">password</span><span style="color: #f8f8f2">);</span>

    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #a6e22e">isValidEmail</span> <span style="color: #f92672">||</span> <span style="color: #f92672">!</span><span style="color: #a6e22e">isValidPassword</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #a6e22e">isValidEmail</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Invalid email address&#39;</span><span style="color: #f8f8f2">);</span>
      <span style="color: #f8f8f2">}</span>
      <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">!</span><span style="color: #a6e22e">isValidPassword</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Your password must be at least 8 characters long&#39;</span><span style="color: #f8f8f2">);</span>
      <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">{</span>
      <span style="color: #a6e22e">Meteor</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">loginWithPassword</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">emailAddress</span><span style="color: #f8f8f2">,</span> <span style="color: #a6e22e">password</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">function</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
          <span style="color: #a6e22e">sAlert</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">error</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Account login failed for unknown reasons :(&#39;</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">}</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">{</span>
          <span style="color: #a6e22e">Router</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">go</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;loggedInHome&#39;</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">}</span>
      <span style="color: #f8f8f2">});</span>
    <span style="color: #f8f8f2">}</span>
  <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">});</span>
</pre></div>
</p>

<p>This event handler is almost identical to the last one, except for the selector used to get the submit event on the form (it&rsquo;s now <code>submit .login-form</code> instead of <code>submit .sign-up-form</code>). Also, the SignUp template uses the <code>Accounts.createUser</code> function, while the Login template uses the <code>Meteor.loginWithPassword</code> function.</p>

<p>These functions have slightly different APIs (<code>Accounts.createUser</code> takes an object for its first argument and <code>Meteor.loginWithPassword</code> just takes three flat arguments), so be careful with that.</p>

<h2 id="finishing-up:c652e3a06a3d24e9af88a5542cc78949">Finishing up</h2>

<p>This is a really basic example. For a full-featured application, you&rsquo;ll also want to allow the user to reset their password.</p>

<p>Look into <a href="http://docs.meteor.com/#/full/accounts_forgotpassword">Accounts.forgotPassword</a> and <a href="http://docs.meteor.com/#/full/accounts_resetpassword">Accounts.resetPassword</a> for more information about how to do this.</p>

<p>There&rsquo;s also a good write-up on this over on Ben McMahen&rsquo;s blog: <a href="http://blog.benmcmahen.com/post/41741539120/building-a-customized-accounts-ui-for-meteor">http://blog.benmcmahen.com/post/41741539120/building-a-customized-accounts-ui-for-meteor</a></p>

  </div>
</div>
  <div class="footer">
    <form class="subscription-form">
      <div class="header"><div class="inner-header">Like what you see?</div></div>
      <div class="email-input-container">
        <input class="email-input" type="text" placeholder="email@example.com">
      </div>
      <button class="subscribe-button" type="submit">Subscribe for updates</button>
    </form>
    <div class="credits">Designed by <a href="http://centralcircles.com">Central Circles</a>. Proudly published with <a href="http://gohugo.io/">Hugo</a>.</div>
  </div>
</body>
</html>